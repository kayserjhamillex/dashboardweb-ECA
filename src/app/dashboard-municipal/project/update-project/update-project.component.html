<div class="page-heading">
  <div class="page-title">
    <div class="row">
      <div class="col-12 col-md-6 order-md-1 order-last">
        <h3>
          Modificar Proyecto
        </h3>
        <p class="text-subtitle text-muted">
          Modificar de los Proyectos
        </p>
      </div>
      <div class="col-12 col-md-6 order-md-2 order-first">
        <nav aria-label="breadcrumb" class="breadcrumb-header float-start float-lg-end">
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a [routerLink]="['/dashboard-admin/home']">
                Dashboard
              </a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">
              Modificar Proyecto
            </li>
          </ol>
        </nav>
      </div>
    </div>
  </div>
  <!-- // Basic multiple Column Form section start -->
  <section id="multiple-column-form">
    <div class="row match-height">
      <div class="col-12">
        <div class="card">
          <div class="card-header">
            <div class="row justify-content-between">
              <div class="col-4">
                <h4 class="card-title">
                  Datos Proyecto
                </h4>
              </div>
              <div class="col-4">
                <button (click)="atras()" type="submit" class="btn btn-primary">
                  <i class="bi bi-backspace"></i>
                  Salir
                </button>
              </div>
            </div>
          </div>
          <div class="card-content">
            <div class="card-body">
              <form class="form">
                <div class="row">
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        Nombre
                      </label>
                      <input type="text" class="form-control" placeholder="Nombre ..." required tabindex="1" autofocus
                        id="proyecto.Nombre" name="proyecto.Nombre" [(ngModel)]="proyecto.Nombre">
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        Detalles
                      </label>
                      <textarea class="form-control" placeholder="Descripcion ..." required tabindex="2"
                        id="proyecto.Descripcion" name="proyecto.Descripcion" [(ngModel)]="proyecto.Descripcion"
                        cols="30" rows="10"></textarea>
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        FechaInicio
                      </label>
                      <input type="date" class="form-control" placeholder="FechaInicio ..." required tabindex="3"
                        id="proyecto.FechaInicio" name="proyecto.FechaInicio" [(ngModel)]="proyecto.FechaInicio">
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        FechaFin
                      </label>
                      <input type="date" class="form-control" placeholder="FechaFin ..." required tabindex="4"
                        id="proyecto.FechaFin" name="proyecto.FechaFin" [(ngModel)]="proyecto.FechaFin">
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        Empresa
                      </label>
                      <div class="row">
                        <div *ngIf="cambiarempresa" class="col-12 p-2">
                          <div class="row justify-content-around">
                            <div class="col-3 p-2">
                              <button data-bs-toggle="modal" data-bs-target="#CreateBussinessModalCenter" type="submit"
                                class="btn btn-primary">
                                Modificar
                              </button>
                            </div>
                            <div class="col-3 p-2">
                              <button data-bs-toggle="modal" data-bs-target="#SearchBussinessModalCenter" type="submit"
                                class="btn btn-primary">
                                Buscar
                              </button>
                            </div>
                            <div class="col-3 p-2">
                              <button (click)="cambioempresa()" type="button" class="btn btn-primary">
                                <i class="bi bi-arrow-repeat"></i>
                                Cambiar
                              </button>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="!cambioempresa" class="col-12 p-2">
                          <div class="card">
                            <div class="card-header">
                              Empresa Encontrada
                            </div>
                            <div class="card-body">
                              <h4>
                                <b>
                                  Nombre Comercial:
                                </b>
                                {{empresa.NombreComercial}}
                              </h4>
                              <h4>
                                <b>
                                  Razon Social:
                                </b>
                                {{empresa.RazonSocial}}
                              </h4>
                              <h4>
                                <b>
                                  RUC:
                                </b>
                                {{empresa.RUC}}
                              </h4>
                              <h6>
                                <b>
                                  Detalles:
                                </b>
                                {{empresa.Detalles}}
                              </h6>
                              <br>
                              <button (click)="cambioempresa()" type="button" class="btn btn-primary">
                                <i class="bi bi-arrow-repeat"></i>
                                Cambiar
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-md-6 col-12">
                    <div class="form-group">
                      <label for="first-name-column">
                        Encargado:
                      </label>
                      <div class="row">
                        <div *ngIf="!cambiarusuario" class="col-12 p-2">
                          <div class="card">
                            <div class="card-header">
                              Usuario Asignado como Encargado:
                            </div>
                            <div class="card-body">
                              <div class="row">
                                <div class="col-12 col-md-2 col-lg-4 p-2">
                                  <img class="rounded-circle img-fluid" [src]="usuario.Foto">
                                </div>
                                <div class="col-12 col-md-2 col-lg-4 p-2">
                                  <h4>
                                    <b>Nombres y Apellidos:</b>
                                    {{usuario.Nombre + ' ' + usuario.Apellido}}
                                  </h4>
                                  <h4>
                                    <b>Correo:</b>
                                    {{usuario.Correo}}
                                  </h4>
                                  <h4>
                                    <b>Documento:</b>
                                    {{usuario.Documento}}
                                  </h4>
                                  <h4>
                                    <b>Celular:</b>
                                    {{usuario.Celular}}
                                  </h4>
                                  <br>
                                  <button (click)="cambiouser()" type="button" class="btn btn-primary">
                                    <i class="bi bi-arrow-repeat"></i>
                                    Cambiar
                                  </button>
                                </div>
                              </div>
                            </div>
                          </div>
                        </div>
                        <div *ngIf="cambiarusuario" class="col-12 p-2">
                          <div class="row justify-content-around">
                            <div class="col-3 p-2">
                              <button data-bs-toggle="modal" data-bs-target="#CreateUserModalCenter" type="submit"
                                class="btn btn-primary">
                                Modificar
                              </button>
                            </div>
                            <div class="col-3 p-2">
                              <button data-bs-toggle="modal" data-bs-target="#SearchUserModalCenter" type="submit"
                                class="btn btn-primary">
                                Buscar
                              </button>
                            </div>
                            <div class="col-3 p-2">
                              <button (click)="cambiouser()" type="submit"
                                class="btn btn-primary">
                                No Cambiar
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="col-12 d-flex justify-content-end">
                    <button (click)="saveproyecto()" type="submit" class="btn btn-primary"
                      [disabled]="(proyecto.Nombre === '' || proyecto.Descripcion === ''
                       || proyecto.Estado === '' || proyecto.EmpresaId === 0 || proyecto.UsuarioId === 0)? true:false">
                      Actualizar el proyecto
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>
<!-- Modificar Usuario -->
<div class="modal fade text-left w-100" id="CreateUserModalCenter"
  tabindex="-1" role="dialog" aria-labelledby="CreateUserModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="CreateUserModalCenterTitle">
          Modificar Encargado
        </h4>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <i data-feather="x"></i>
        </button>
      </div>
      <div class="modal-body">
        <form class="form">
          <div class="row">
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Nombre
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Nombre ..."
                  required tabindex="1" autofocus
                  id="usuario.Nombre"
                  name="usuario.Nombre"
                  [(ngModel)]="usuario.Nombre">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Apellido
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Apellido ..."
                  required tabindex="2"
                  id="usuario.Apellido"
                  name="usuario.Apellido"
                  [(ngModel)]="usuario.Apellido">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Correo
                </label>
                <input type="email"
                  class="form-control"
                  placeholder="Apellido ..."
                  required tabindex="3"
                  id="usuario.Correo"
                  name="usuario.Correo"
                  pattern="[a-zA-Z0-9!#$%&amp;'*+\/=?^_`{|}~.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*"
                  [(ngModel)]="usuario.Correo">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Documento
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Documento ..."
                  required tabindex="4"
                  id="usuario.Documento"
                  name="usuario.Documento"
                  onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                  [(ngModel)]="usuario.Documento">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Celular
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Celular ..."
                  required tabindex="5"
                  id="usuario.Celular"
                  name="usuario.Celular"
                  onKeypress="if (event.keyCode < 45 || event.keyCode > 57) event.returnValue = false;"
                  [(ngModel)]="usuario.Celular">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Usuario
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Usuario ..."
                  required tabindex="6"
                  id="usuario.Usuario"
                  name="usuario.Usuario"
                  [(ngModel)]="usuario.Usuario">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Contraseña
                </label>
                <input type="password"
                  class="form-control"
                  placeholder="Contraseña ..."
                  required tabindex="7"
                  id="usuario.Contrasena"
                  name="usuario.Contrasena"
                  [(ngModel)]="usuario.Contrasena">
              </div>
            </div>
            <div class="col-12">
              <div class="row">
                <div class="col-md-8">
                  <div class="form-group">
                    <label>
                      Foto
                    </label>
                    <br>
                    <button (click)="changeImg()"
                    type="button" class="btn btn-primary">
                      <input type="file"
                        name="avatar"
                        #file1 required tabindex="11"
                        (change)="changeImagen()"
                        accept=".png,.jpg,.jpeg">
                        Subir Imagen
                    </button>
                    <br>
                    <input name="usuario.Foto"
                    [(ngModel)]="usuario.Foto"
                    type="text" class="form-control text-primary" readonly required>
                  </div>
                </div>
                <div class="col-md-4">
                  <img class="rounded-circle img-fluid" [src]="usuario.Foto">
                </div>
              </div>
            </div>
            <div class="col-12 d-flex justify-content-end">
              <button (click)="saveAdmin()" type="submit" class="btn btn-primary"
              [disabled]="(usuario.Nombre === '' ||  usuario.Apellido === '' ||  usuario.Correo === '' ||  usuario.Documento === '' ||  usuario.Celular === '' ||  usuario.Usuario === '' ||  usuario.RolId === 0)? true:false">
                Registrar al Usuario Nuevo
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
          <i class="bx bx-x d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Cerrar
          </span>
        </button>
        <button (click)="saveempresa()" type="button" class="btn btn-primary ml-1" data-bs-dismiss="modal"
        [disabled]="(empresa.NombreComercial === '' ||  empresa.RazonSocial === '' ||  empresa.RUC === '' ||  empresa.Detalles === '')? true:false">
          <i class="bx bx-check d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Registrar la Empresa
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Buscar Usuario -->
<div class="modal fade" id="SearchUserModalCenter" tabindex="-1" role="dialog"
  aria-labelledby="SearchUserModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="SearchUserModalCenterTitle">
          Buscar Encargado
        </h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <i data-feather="x"></i>
        </button>
      </div>
      <div class="modal-body">
        <form class="form form-horizontal">
          <div class="form-body">
            <div class="col-12 form-group">
              <input type="text" id="eldato" name="eldato" class="form-control" [(ngModel)]="eldato"
                placeholder="Correo, documento o celular del usuario">
            </div>
            <div class="col-12 d-flex justify-content-around">
              <button (click)="buscarcorreo(eldato)" type="submit" class="btn btn-primary">
                Correo
              </button>
              <button (click)="buscardocumento(eldato)" type="submit" class="btn btn-primary">
                Documento
              </button>
              <button (click)="buscarcelular(eldato)" type="submit" class="btn btn-primary">
                Celular
              </button>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
          <i class="bx bx-x d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Cerar
          </span>
        </button>
        <button type="button" class="btn btn-primary ml-1" data-bs-dismiss="modal">
          <i class="bx bx-check d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Confirmar
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Modificar Empresa -->
<div class="modal fade text-left w-100" id="CreateBussinessModalCenter"
  tabindex="-1" role="dialog" aria-labelledby="CreateBussinessModalCenterTitle"
  aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-xl" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="CreateBussinessModalCenterTitle">
          Modificar Empresa
        </h4>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <i data-feather="x"></i>
        </button>
      </div>
      <div class="modal-body">
        <form class="form">
          <div class="row">
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Nombre Comercial
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="Nombre Comercial ..."
                  required tabindex="1" autofocus
                  id="empresa.NombreComercial"
                  name="empresa.NombreComercial"
                  [(ngModel)]="empresa.NombreComercial">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Razon Social
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="RazonSocial ..."
                  required tabindex="2"
                  id="empresa.RazonSocial"
                  name="empresa.RazonSocial"
                  [(ngModel)]="empresa.RazonSocial">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  RUC
                </label>
                <input type="text"
                  class="form-control"
                  placeholder="RUC ..."
                  required tabindex="3"
                  id="empresa.RUC"
                  name="empresa.RUC"
                  [(ngModel)]="empresa.RUC">
              </div>
            </div>
            <div class="col-md-6 col-12">
              <div class="form-group">
                <label for="first-name-column">
                  Detalles
                </label>
                <textarea class="form-control"
                placeholder="Detalles ..."
                required tabindex="3"
                id="empresa.Detalles"
                name="empresa.Detalles"
                [(ngModel)]="empresa.Detalles"
                cols="30" rows="10"></textarea>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
          <i class="bx bx-x d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Cerrar
          </span>
        </button>
        <button (click)="saveempresa()" type="button" class="btn btn-primary ml-1" data-bs-dismiss="modal"
        [disabled]="(empresa.NombreComercial === '' ||  empresa.RazonSocial === '' ||  empresa.RUC === '' ||  empresa.Detalles === '')? true:false">
          <i class="bx bx-check d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Registrar la Empresa
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
<!-- Buscar Empresa -->
<div class="modal fade" id="SearchBussinessModalCenter" tabindex="-1" role="dialog"
  aria-labelledby="SearchBussinessModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-centered modal-dialog-scrollable" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="SearchBussinessModalCenterTitle">
          Buscar Empresa
        </h5>
        <button type="button" class="close" data-bs-dismiss="modal" aria-label="Close">
          <i data-feather="x"></i>
        </button>
      </div>
      <div class="modal-body">
        <form class="form form-horizontal">
          <div class="form-body">
            <div class="row">
              <div class="col-12 form-group">
                <label for="first-name-column">
                  RUC:
                </label>
                <input type="text" id="elruc" name="elruc" class="form-control" [(ngModel)]="elruc"
                  placeholder="Ruc de la empresa">
              </div>
              <div class="col-12">
                <button type="submit" (click)="searchruc(elruc)" class="btn btn-primary btn-block">
                  Buscar
                </button>
              </div>
            </div>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-light-secondary" data-bs-dismiss="modal">
          <i class="bx bx-x d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Cerar
          </span>
        </button>
        <button type="button" class="btn btn-primary ml-1" data-bs-dismiss="modal">
          <i class="bx bx-check d-block d-sm-none"></i>
          <span class="d-none d-sm-block">
            Confirmar
          </span>
        </button>
      </div>
    </div>
  </div>
</div>
